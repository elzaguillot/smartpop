CC=mpic++
#CC=g++
CFLAGS=-c -MMD -Wall -Wno-non-virtual-dtor -Wno-ctor-dtor-privacy -I /usr/lib/mpich/include/
CXXFLAGS= -O3 -funroll-loops #-I /usr/lib/mpich/include
LDFLAGS=  -L /usr/local/lib/ -lboost_iostreams -lpthread  -lboost_program_options -L/lib64/mpich2/lib/ #-lmpich -lmpichcxx
SOURCES=mainp.cpp demographic_function.cpp msnetwork.cpp simulation.cpp population.cpp human.cpp utils.cpp dna.cpp metapopulation.cpp dnastructure.cpp io_interface.cpp myprogram_options.cpp
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=smartpop

all: $(SOURCES) $(EXECUTABLE)


$(EXECUTABLE): $(OBJECTS) 
	$(CC) $(CXXFLAGS) $(OBJECTS)  $(LDFLAGS)  -o $@ 

.cpp.o:
	$(CC) $(CXXFLAGS) $(CFLAGS) $< -o $@

clean:
	rm -f *.o *.d smartpop statpop smartpopMPI

# Include all header-dependency makefiles autogenerated by the -MMD switch to g++
-include *.d
