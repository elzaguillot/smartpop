
CC=g++

CFLAGS=-c -MMD -Wall -Wno-non-virtual-dtor -Wno-ctor-dtor-privacy
CXXFLAGS= -O3 -funroll-loops 
LDFLAGS=  -L /usr/local/lib/ -lboost_iostreams -lpthread  -lboost_program_options 
SOURCES=main.cpp demographic_function.cpp msnetwork.cpp simulation.cpp population.cpp human.cpp utils.cpp dna.cpp metapopulation.cpp dnastructure.cpp io_interface.cpp myprogram_options.cpp	
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=smartpop

all: $(SOURCES) $(EXECUTABLE)

mpi: $(SOURCESP) $(EXECUTABLEP)

stat: $(SOURCESSTAT) $(EXECUTABLESTAT)

$(EXECUTABLE): $(OBJECTS) 
	$(CC) $(CXXFLAGS) $(OBJECTS)  $(LDFLAGS)  -o $@ 


.cpp.o:
	$(CC) $(CXXFLAGS) $(CFLAGS) $< -o $@

clean:
	rm -f *.o *.d smartpop statpop smartpopMPI

# Include all header-dependency makefiles autogenerated by the -MMD switch to g++
-include *.d
